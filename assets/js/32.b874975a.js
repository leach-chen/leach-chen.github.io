(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{336:function(t,a,s){"use strict";s.r(a);var n=s(1),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"rxjava结合retrofit的使用教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rxjava结合retrofit的使用教程","aria-hidden":"true"}},[t._v("#")]),t._v(" Rxjava结合Retrofit的使用教程")]),t._v(" "),s("h4",{attrs:{id:"之前写过retrofit的使用，现在介绍一下rxjava和retrofit结合使用。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#之前写过retrofit的使用，现在介绍一下rxjava和retrofit结合使用。","aria-hidden":"true"}},[t._v("#")]),t._v(" 之前写过Retrofit的使用，现在介绍一下Rxjava和Retrofit结合使用。")]),t._v(" "),s("ul",[s("li",[t._v("添加依赖\n"),s("pre",[t._v("compile 'com.squareup.retrofit2:retrofit:2.3.0'\ncompile 'com.squareup.retrofit2:converter-gson:2.3.0'\ncompile 'com.squareup.retrofit2:adapter-rxjava:2.3.0'\ncompile 'io.reactivex:rxandroid:1.2.1'\n")])]),t._v(" "),s("li",[t._v("创建Retrofit实例")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("        String url "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"http://www.baidu.com/"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        Retrofit retrofit "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Retrofit"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Builder")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("baseUrl")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addConverterFactory")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GsonConverterFactory"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("create")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addCallAdapterFactory")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RxJavaCallAdapterFactory"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("create")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("build")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("定义接口并通过Retrofit实例获取")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("RetrofitService")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@GET")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"users/{user}/repos"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    Observable"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("List"),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Repo"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("listRepos")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Path")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"user"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" String user"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("获取RetrofitService代理并调用其接口方法")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("        RetrofitService retrofitService "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" retrofit"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("create")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("RetrofitService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        retrofitService"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("listRepos")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"user"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("subscribeOn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Schedulers"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("io")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("observeOn")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AndroidSchedulers"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("mainThread")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Subscriber")]),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("List"),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Repo"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token operator"}},[t._v(">")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            \t"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            \t"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("onCompleted")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                \n            \t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            \t"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            \t"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("onError")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Throwable e"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            \t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            \t"),s("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            \t"),s("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("onNext")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("List"),s("span",{attrs:{class:"token generics function"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Repo"),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" repos"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            \t"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"是不是rxjava与retrofit结合就比较简单了呢。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#是不是rxjava与retrofit结合就比较简单了呢。","aria-hidden":"true"}},[t._v("#")]),t._v(" 是不是Rxjava与Retrofit结合就比较简单了呢。")])])}],!1,null,null,null);o.options.__file="android33.md";a.default=o.exports}}]);