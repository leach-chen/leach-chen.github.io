---
layout: post
title: GPS数据格式
date:  2018-03-07 10:00:00 +0900  
description: GPS数据格式
img: post-8.jpg # Add image post (optional)
tags: [GPS]
author: # Add name author (optional)
other: true
category: blog
---

{{site.label1}} <a href="https://github.com/leach-chen/leach-chen.github.io/" target="\_blank">Leach Chen</a> {{site.label2}}


该协议信息包括 GGA 位置测定系统的定位资料、GSV 导航卫星资料、RMC 导航卫星特定精简资料、VTG 方向及速度等相关资料。这里以接收 GGA 数据为例，给出的格式如下：<br>
＄GPGGA，hhmmss,dddmm.mmmm,a,dddmm.mmmm,a,x,xx,x.x,x.x,M,,M,x.x,xxxx\*CS

例：＄GPGGA，033744,2446.5241,N,12100.1536,E,1,10,0.8,133.4,M,,,,\*1F

表 1 所列是其具体说明。通过表 1 便可读出上面例子中的位置信息为：北纬 24度46.5241分，西经12l 度 00.1536 分，格林威治时间为：3点 37 分 44 秒

**GPS 数据格式**<br>
**a.GPS 固定数据输出语句($GPGGA)**<br>
这是一帧GPS 定位的主要数据，也是使用最广的数据。<br>
$GPGGA 语句包括 17 个字段：语句标识头，世界时间，纬度，纬度半球，经度，经度半球，定位质量指示，使用卫星数量，水平精确度，海拔高度，高度单位，大地水准面高度，高度单位，差分GPS 数据期限，差分参考基站标号，校验和结束标记(用回车符<CR>和换行符<LF>)，分别用 14 个逗号进行分隔。该数据帧的结构及各字段释义如下：<br>

**$GPGGA,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,M,<10>,M,<11>,<12>\*xx**

$GPGGA：起始引导符及语句格式说明(本句为 GPS 定位数据)；<br>
<1> UTC 时间，格式为 hhmmss.sss；<br>
<2> 纬度，格式为 ddmm.mmmm(第一位是零也将传送)；<br>
<3> 纬度半球，N或S(北纬或南纬)；<br>
<4> 经度，格式为 dddmm.mmmm(第一位零也将传送)；<br>
<5> 经度半球，E 或 W(东经或西经)<br>
<6> 定位质量指示，0=定位无效，1=定位有效；<br>
<7> 使用卫星数量，从 00 到 12(第一个零也将传送)<br>
<8> 水平精确度，0.5 到 99.9<br>
<9> 天线离海平面的高度，-9999.9 到 9999.9 米M 指单位米<br>
<10> 大地水准面高度，-9999.9 到 9999.9 米M 指单位米<br>
<11> 差分 GPS 数据期限(RTCM SC-104)，最后设立 RTCM 传送的秒数量<br>
<12> 差分参考基站标号，从 0000 到 1023(首位 0 也将传送)。<br>
\* 语句结束标志符<br>
xx 从$开始到*之间的所有 ASCII 码的异或校验和

**b.可视卫星状态输出语句($GPGSV)<br>**
例2：$GPGSV，2，1，08，06，33，240，45，10，36，074，47，16，21，078，44，17，36，313，42\*78<br>
标准格式： **$GPGSV，(1)，(2)，(3)，(4)，(5)，(6)，(7)，…(4),(5)，(6)，(7)\*hh**<br>
各部分含义为：<br>
(1)总的 GSV 语句电文数；<br>
(2)当前 GSV 语句号:1;<br>
(3)可视卫星总数:08;<br>
(4)卫星号:06;<br>
(5)仰角(00～90 度):33度;<br>
(6)方位角(000～359 度):240 度;<br>
(7)信噪比(00～99dB):45dB(后面依次为第 10，16，17 号卫星的信息);<br>
\*总和校验域；<br>
hh 总和校验数:78;<br>
注：每条语句最多包括四颗卫星的信息，每颗卫星的信息有四个数据项，即：<br>
(4)－卫星号，(5)－仰角，(6)－方位角，(7)－信噪比。<br>

**c.当前卫星信息($GSA)**<br>
**$GPGSA,<1>,<2>,<3>,<3>,,,,,<3>,<3>,<3>,<4>,<5>,<6>,<7>**<br>
<1>模式 ：M = 手动， A = 自动。<br>
<2>定位型式 1 = 未定位， 2 = 二维定位， 3 = 三维定位。<br>
<3>PRN 数字：01 至 32 表天空使用中的卫星编号，最多可接收 12 颗卫星信息。<br>
<4> PDOP 位置精度因子(0.5~99.9)<br>
<5> HDOP 水平精度因子(0.5~99.9)<br>
<6> VDOP 垂直精度因子(0.5~99.9)<br>
<7> Checksum.(检查位).<br>

**d.推荐定位信息(RMC)**<br>
**$GPRMC,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>,<12>\*hh**<br>
<1> UTC 时间，hhmmss(时分秒)格式<br>
<2> 定位状态，A=有效定位，V=无效定位<br>
<3> 纬度 ddmm.mmmm(度分)格式(前面的 0 也将被传输)<br>
<4> 纬度半球 N(北半球)或 S(南半球)<br>
<5> 经度 dddmm.mmmm(度分)格式(前面的 0 也将被传输)<br>
<6> 经度半球 E(东经)或 W(西经)<br>
<7> 地面速率(000.0~999.9 节，前面的 0 也将被传输)<br>
<8> 地面航向(000.0~359.9 度，以真北为参考基准，前面的 0 也将被传输)<br>
<9> UTC 日期，ddmmyy(日月年)格式<br>
<10> 磁偏角(000.0~180.0 度，前面的 0 也将被传输)<br>
<11> 磁偏角方向，E(东)或 W(西)<br>
<12> 模式指示(仅 NMEA0183 3.00 版本输出，A=自主定位，D=差分，E=估算，N=数据无效)<br>

**e.地面速度信息(VTG)**<br>
**$GPVTG,<1>,T,<2>,M,<3>,N,<4>,K,<5>\*hh**<br>
<1> 以真北为参考基准的地面航向(000~359 度，前面的 0 也将被传输)<br>
<2> 以磁北为参考基准的地面航向(000~359 度，前面的 0 也将被传输)<br>
<3> 地面速率(000.0~999.9 节，前面的 0 也将被传输)<br>
<4> 地面速率(0000.0~1851.8 公里/小时，前面的 0 也将被传输)<br>
<5> 模式指示(仅 NMEA0183 3.00 版本输出，A=自主定位，D=差分，E=估算，N=数据无效)<br>

**GPS 数据格式**<br>
**a.GPRMC（建议使用最小 GPS 数据格式）**<br>
**$GPRMC,<1>,<2>,<3>,<4>,<5>,<6>,<7>,<8>,<9>,<10>,<11>**<br>
1) 标准定位时间（UTC time）格式：时时分分秒秒.秒秒秒（hhmmss.sss）。<br>
2) 定位状态，A = 数据可用，V = 数据不可用。<br>
3) 纬度，格式：度度分分.分分分分（ddmm.mmmm）。<br>
4) 纬度区分，北半球（N）或南半球（S）。<br>
5) 经度，格式：度度分分.分分分分。<br>
6) 经度区分，东（E）半球或西（W）半球。<br>
7) 相对位移速度， 0.0 至 1851.8 knots<br>
8) 相对位移方向，000.0 至 359.9 度。实际值。<br>
9) 日期，格式：日日月月年年（ddmmyy）。<br>
10) 磁极变量，000.0 至 180.0。<br>
11) 度数。<br>
12) Checksum.(检查位)<br>

**b.GPGSV（所示卫星格式）**<br>
**$GPGSV,<1>,<2>,<3>,<4>,<5>,<6>,<7>,?<4>,<5>,<6>,<7>,<8>**<br>
1) 天空中收到讯号的卫星总数。<br>
2) 定位的卫星总数。<br>
3) 天空中的卫星总数，00 至 12。<br>
4) 卫星编号， 01 至 32。<br>
5) 卫星仰角， OO 至 90 度。<br>
6) 卫星方位角， OOO 至 359 度。实际值。<br>
7) 讯号噪声比（C/No）， 00 至 99 dB；无表未接收到讯号。<br>
8) Checksum.(检查位).第<4>,<5>,<6>,<7>项个别卫星会重复出现，每行最多有四颗卫星。其余卫星信息会于次一行出现，若未使用，这些字段会空白。

**c.GPGSA（GPS 精度指针及使用卫星格式）**<br>
**$GPGSA,<1>,<2>,<3>,<3>,,,,,<3>,<3>,<3>,<4>,<5>,<6>,<7>**<br>
1)模式 2：M = 手动， A = 自动。<br>
2)模式 1：定位型式 1 = 未定位， 2 = 二维定位， 3 = 三维定位。<br>
3) PRN 数字：01 至 32 表天空使用中的卫星编号，最多可接收 12 颗卫星信息。<br>
4) PDOP-位置精度稀释 0.5 至 99.9.<br>
5) HDOP-水平精度稀释 0.5 to 99.9.<br>
6) VDOP-垂直精度稀释 0.5 to 99.9.<br>
7) Checksum.(检查位).

**d. GPS 固定数据输出语句(＄GPGGA)**<br>
这是一帧GPS 定位的主要数据，也是使用最广的数据。为了便于理解，下面举例说明＄GPGGA 语句各部分的含义。例 1 是用 GN－77N 和笔者开发的软硬件接口，在笔者所在地接收到的＄GPGGA 语句的内容。<br>
例1：＄GPGGA，050901，3931.4449，N，11643.5123，E，1，07，1.4，76.2，M，－7.0，M，，＊65<br>
其标准格式为：**＄GPGGA，(1)，(2)，(3)，(4)，(5)，(6)，(7)，(8)，(9)，M，(10)，M，(11)，(12)＊hh**<br>
各部分所对应的含义为：<br>
(1)定位 UTC 时间：05 时 09分 01 秒;<br>
(2)纬度(格式 ddmm.mmmm:即 dd 度，mm.mmmm 分)；<br>
(3)N/S(北纬或南纬)：北纬 39 度 31.4449 分；<br>
(4)经度(格式 dddmm.mmmm：即 ddd 度，mm.mmmm 分)；<br>
(5)E/W(东经或西经)：东经 116 度 43.5123 分；<br>
(6)质量因子(0=没有定位，1=实时 GPS，2=差分 GPS)：1=实时 GPS；<br>
(7)可使用的卫星数(0～8)：可使用的卫星数=07；<br>
(8)水平精度因子(1.0～99.9)；水平精度因子=1.4；<br>
(9)天线高程(海平面，－9999.9～99999.9，单位：m)；天线高程=76.2m);<br>
(10)大地椭球面相对海平面的高度(－999.9～9999.9，单位：m):－7.0m;<br>
(11)差分 GPS 数据年龄，实时 GPS时无:无;<br>
(12)差分基准站号(0000～1023)，实时 GPS 时无:无;<br>
＊总和校验域；<br>
hh 总和校验数:65<br>

**e.可视卫星状态输出语句(＄GPGSV)**<br>
例2：＄GPGSV，2，1，08，06，33，240，45，10，36，074，47，16，21，078，44，17，36，313，42＊78<br>
标准格式： ＄GPGSV，(1)，(2)，(3)，(4)，(5)，(6)，(7)，…(4),(5)，(6)，(7)＊hh<br>
各部分含义为：<br>
(1)总的 GSV 语句电文数；2;<br>
(2)当前 GSV 语句号:1;<br>
(3)可视卫星总数:08;<br>
(4)卫星号:06;<br>
(5)仰角(00～90 度):33度;<br>
(6)方位角(000～359 度):240 度;<br>
(7)信噪比(00～99dB):45dB(后面依次为第 10，16，17 号卫星的信息);<br>
＊总和校验域；<br>
hh 总和校验数:78;<br>
注：每条语句最多包括四颗卫星的信息，每颗卫星的信息有四个数据项，即：<br>
(4)－卫星号，(5)－仰角，(6)－方位角，(7)－信噪比。<br>

From: http://zhidao.baidu.com/question/71090414.html<br>

GPS 接收机能提供 ASCII 和二进制两种格式。其中 ASCII 码为 NMEA－0183，NMEA－0183 是美国国家海洋电子协会为海用电子设备制定的标准格式。它是在过去海用电子设备的标准格式0180 和 0182 的基础上，增加了 GPS 接收机输出的内容而完成的。目前广泛采用的是Ver 2.00版本。现在除少数GPS 接收机外，几乎所有的接收机均采用了这一格式。各条语句都以$开头，格式为：$AAXXX,ddd…ddd,\*hh<CR><LF>。AA 为识别符，XXX 为语句名，ddd…ddd 为发送的数据内容，\*后 hh为校验和，<CR><LF>回车、换行符。GPS 接收机可以输出多种数据格式。如 GGA、ZDA、GLL、GSA、GSV、VTG 等格式。其中$GPGGA 是最常用的一种数据格式。下面是$GPGGA 的一个例子。<br>
＄GPGGA，050901，3931.4449，N，11643.5123，E，1，07，1.4，76.2，M，－7.0，M，，＊65<br>
说明如下：<br>
（1） GGA 表示定位语句。<br>
（2） 定位 UTC 时间：050901 表示 05 时 09 分 01 秒<br>
（3） 接收机所在纬度值(格式 ddmm.mmmm)，N/S(北纬或南纬)。3931.4449，N 表示北纬 39 度 31.4449分。<br>
（4） 经度(格式 dddmm.mmmm)，E/W(东经或西经)。11643.5123，E 表示东经116 度 43.5123 分。<br>
（5） 定位代号（0 为未定位或无效的定位；1为 GPS SPS 格式（SPS 为
商业用途格式），已定位；2 为偏差修正 GPS（即 DGPS），SPS 格式，已定位；3 为 GPS PPS 格式（PPS 为军用格式），已定位）。1 表示使用 SPS 定位服务而且是有效的定位。<br>
（6） 可使用的卫星数。07表示可使用的卫星数为7 颗。<br>
（7） 水平精度因子(HDOP)，1.4 表示水平精度因子为 1.4。<br>
（8） 天线 MSL（MSL - Main Sea Level 公海平面）高程(海平面，－9999.9～99999.9，单位：m)，76.2 为天线 MSL 高程。<br>
（9） 大地椭球面相对海平面的高度(－999.9～9999.9，单位：m)，－7.0m。<br>
（10）差分 GPS 数据年龄，实时 GPS 时无:无。<br>
（11）差分基准站号(0000～1023)，实时 GPS 时无:无。<br>
（12）＊总和校验域（hh ），总和校验数为 65。NMEA－0183 的串行通讯协议为：波特率为 4800，无校验位，8 个数据位，开始位和停止位各为1。<br>
航向信息语句格式：$HEHDT，23.254，T*cc<br>
•  $GPAAM - Waypoint Arrival Alarm<br>
•  $GPBOD - Bearing, Origin to Destination<br>
•  $GPBWW - Bearing, Waypoint to Waypoint<br>
•  $GPGGA - Global Positioning System Fix Data<br>
•  $GPGLL - Geographic Position, Latitude/Longitude<br>
•  $GPGSA - GPS DOP and Active Satellites<br>
•  $GPGST - GPS Pseudorange Noise Statistics<br>
•  $GPGSV - GPS Satellites in View<br>
•  $GPHDG - Heading, Deviation & Variation<br>
•  $GPHDT - Heading, True<br>
•  $GPRMB - Recommended Minimum Navigation Information<br>
•  $GPRMC - Recommended Minimum Specific GPS/TRANSIT Data<br>
•  $GPRTE - Routes<br>
•  $GPVTG - Track Made Good and Ground Speed<br>
•  $GPWCV - Waypoint Closure Velocity<br>
•  $GPWNC - Distance, Waypoint to Waypoint<br>
•  $GPWPL - Waypoint Location<br>
•  $GPXTE - Cross-Track Error, Measured<br>
•  $GPXTR - Cross-Track Error, Dead Reckoning<br>
•  $GPZDA - UTC Date/Time and Local Time Zone Offset<br>
•  $GPZFO - UTC and Time from Origin Waypoint<br>
•  $GPZTG - UTC and Time to Destination Waypoint<br>

NMEA-0183 语句格式一般为：“$”为语句起始标志；“，”为域分隔符；“\*”为校验和识别符，其后面的两位数为校验和；“<CR>／<LF>”为终止符，表示回车、换行。本文以 GPGGA 信息语句为例，进行详细分析。

“$HEHDT,nnn.nn,T*hh<CR><CF>”(双引号不在发送范围)，其中$表示句子开始；HE 和 HDT 分别表示发送数据者为电罗经和发送数据为航向数据；nnn.nn 表示航向方位角，在 0.0°～359.9°之间，前后用逗号隔开；T 表示 True；\*表示后续 2 个数为校验和；hh 表示校验和，为从$到\*符号之间但不包括这 2 个字符本身的“异或”值的 ASCII 码；<CR>和<CF>为回车和换行字符，表示句子的结束。HDT 语句可以由航向数据通过数值与字符转换、“异或”运算和 ASCII 码变换等操作来实现。GPS 接收机输出端口与 电罗经输出端口均为 RS422 接口,转换器同时与两者连接.GPS 输入标准 NMEA 一 0183 格式的语句,包括航向信号 HDT 语句和航向变化率信号 ROT 语句.电罗经只输入一种格式信号,同时包含航向信息与航向变化率信息. 当检测有 GPS 信号输入时,转换器将 GPS 的航向语句直接输出到接口为 RS232 的 GPS 终端导航设备,同时将输入的HDT 与 R0T 数据整合转换为 电罗经 数据格式输出到接口为Rs422 的 电罗经终端导航设备陀螺罗经 数据: HEADING TURE \*\*\*.\* 陀螺罗经航向
ROT \*\*.\* /MIN 旋转速率
